// TODO:  THIS NEEDS SOME SERIOUS REORGANIZATION AND
//        CLEANUP. IF YOU WILL USE FEATURE QUERIES
//        USE THEM EVERYWHERE

//Typography Overrides for Recursive Variable Font
//Orignal stylesheet info:
//Generated by Wakamai Fondue - https://wakamaifondue.com
//by Roel Nieskens/PixelAmbacht - https://pixelambacht.nl
//
//Rest of the CSS generated by Carlos Araya using techniques
//from Jason Pamental
// (https://rwt.io/typography-tips/variable-fonts-what-web-authors-need-know)
// and
//Roel Nieskens, again,
// (https://pixelambacht.nl/2019/fixing-variable-font-inheritance/)

// @font-face declaration
@font-face {
  font-family: 'Recursive VF';
  src: url('./fonts/recursive-subset.woff2') format('woff2 supports variations'),
	url('./fonts/recursive-subset.woff2') format('woff2-variations');
  font-weight: 300 1000;
  font-display: swap;
}

// Set custom properties for each layout feature and font variation
:root {
  --recursive-aalt: 'aalt' off;
  --recursive-case: 'case' off;
  --recursive-dlig: 'dlig' off;
  --recursive-dnom: 'dnom' off;
  --recursive-frac: 'frac' off;
  --recursive-numr: 'numr' off;
  --recursive-ordn: 'ordn' off;
  --recursive-pnum: 'pnum' off;
  --recursive-sinf: 'sinf' off;
  --recursive-ss01: 'ss01' off;
  --recursive-ss02: 'ss02' off;
  --recursive-ss03: 'ss03' off;
  --recursive-ss04: 'ss04' off;
  --recursive-ss05: 'ss05' off;
  --recursive-ss06: 'ss06' off;
  --recursive-ss07: 'ss07' off;
  --recursive-ss08: 'ss08' off;
  --recursive-ss09: 'ss09' off;
  --recursive-ss10: 'ss10' off;
  --recursive-ss11: 'ss11' off;
  --recursive-ss12: 'ss12' off;
  --recursive-sups: 'sups' off;
  --recursive-titl: 'titl' off;
  --recursive-zero: 'zero' off;
  // define default values for Variable Font Features
  --recursive-mono: 0; // valid values: 0 - 1
  --recursive-casual: 0; // valid values: 0 - 1
  --recursive-weight: 400; //valid values: 300 - 1000
  --recursive-slant: 0; // valid values: -15 - 0
  --recursive-italic: 0.5; // valid values: 0 - 1
}

// Additional styles for the body element using Recursive
* {
  font-family: 'Recursive VF', Verdana, sans-serif;
  font-weight: var(--recursive-weight);
  font-variation-settings: 'MONO' var(--recursive-mono),
	'CASL' var(--recursive-casual), 'slnt' var(--recursive-slant),
	'ital' var(--recursive-italic);
}

// TODO: Decide if we need the opentype feature classes
//       or if we need to have only the default values
//       and know how to change them.
//
// If class is applied, update custom property and
// apply modern font-variant-* when supported
.recursive-aalt {
  --recursive-aalt: 'aalt' on;
}

.recursive-case {
  --recursive-case: 'case' on;
}

.recursive-dlig {
  --recursive-dlig: 'dlig' on;
}

@supports (font-variant-ligatures: discretionary-ligatures) {
  .recursive-dlig {
	--recursive-dlig: '____';
	font-variant-ligatures: discretionary-ligatures;
  }
}

.recursive-dnom {
  --recursive-dnom: 'dnom' on;
}

.recursive-frac {
  --recursive-frac: 'frac' on;
}

@supports (font-variant-numeric: diagonal-fractions) {
  .recursive-frac {
	--recursive-frac: '____';
	font-variant-numeric: diagonal-fractions;
  }
}

.recursive-numr {
  --recursive-numr: 'numr' on;
}

.recursive-ordn {
  --recursive-ordn: 'ordn' on;
}

@supports (font-variant-numeric: ordinal) {
  .recursive-ordn {
	--recursive-ordn: '____';
	font-variant-numeric: ordinal;
  }
}

.recursive-pnum {
  --recursive-pnum: 'pnum' on;
}

@supports (font-variant-numeric: proportional-nums) {
  .recursive-pnum {
	--recursive-pnum: '____';
	font-variant-numeric: proportional-nums;
  }
}

.recursive-sinf {
  --recursive-sinf: 'sinf' on;
}

.recursive-ss01 {
  --recursive-ss01: 'ss01' on;
}

.recursive-ss02 {
  --recursive-ss02: 'ss02' on;
}

.recursive-ss03 {
  --recursive-ss03: 'ss03' on;
}

.recursive-ss04 {
  --recursive-ss04: 'ss04' on;
}

.recursive-ss05 {
  --recursive-ss05: 'ss05' on;
}

.recursive-ss06 {
  --recursive-ss06: 'ss06' on;
}

.recursive-ss07 {
  --recursive-ss07: 'ss07' on;
}

.recursive-ss08 {
  --recursive-ss08: 'ss08' on;
}

.recursive-ss09 {
  --recursive-ss09: 'ss09' on;
}

.recursive-ss10 {
  --recursive-ss10: 'ss10' on;
}

.recursive-ss11 {
  --recursive-ss11: 'ss11' on;
}

.recursive-ss12 {
  --recursive-ss12: 'ss12' on;
}

.recursive-sups {
  --recursive-sups: 'sups' on;
}

@supports (font-variant-position: super) {
  .recursive-sups {
	--recursive-sups: '____';
	font-variant-position: super;
  }
}

.recursive-titl {
  --recursive-titl: 'titl' on;
}

@supports (font-variant-caps: titling-caps) {
  .recursive-titl {
	--recursive-titl: '____';
	font-variant-caps: titling-caps;
  }
}

.recursive-zero {
  --recursive-zero: 'zero' on;
}

@supports (font-variant-numeric: slashed-zero) {
  .recursive-zero {
	--recursive-zero: '____';
	font-variant-numeric: slashed-zero;
  }
}

// Apply current state of all custom properties
// whenever a class is being applied
.recursive-aalt,
.recursive-case,
.recursive-dlig,
.recursive-dnom,
.recursive-frac,
.recursive-numr,
.recursive-ordn,
.recursive-pnum,
.recursive-sinf,
.recursive-ss01,
.recursive-ss02,
.recursive-ss03,
.recursive-ss04,
.recursive-ss05,
.recursive-ss06,
.recursive-ss07,
.recursive-ss08,
.recursive-ss09,
.recursive-ss10,
.recursive-ss11,
.recursive-ss12,
.recursive-sups,
.recursive-titl,
.recursive-zero {
  font-feature-settings: var(--recursive-aalt), var(--recursive-case),
	var(--recursive-dlig), var(--recursive-dnom), var(--recursive-frac),
	var(--recursive-numr), var(--recursive-ordn), var(--recursive-pnum),
	var(--recursive-sinf), var(--recursive-ss01), var(--recursive-ss02),
	var(--recursive-ss03), var(--recursive-ss04), var(--recursive-ss05),
	var(--recursive-ss06), var(--recursive-ss07), var(--recursive-ss08),
	var(--recursive-ss09), var(--recursive-ss10), var(--recursive-ss11),
	var(--recursive-ss12), var(--recursive-sups), var(--recursive-titl),
	var(--recursive-zero);
}

// Removed Named Variable Instances because I will never use them.
// If interested you can generate your own from the font using
// Wakamaifondue

// The following styles only apply if the browser support
@supports (font-variation-settings: normal) {
  :root {
	// Breakpoint variables
	--bp-small: 24.15;
	--bp-medium: 43.75;
	--bp-large: 60.25;
	--bp-xlarge: 75;
	// Paragraph variables
	--p-line-height-min: 1.25;
	--p-line-height-max: 1.4;
	--p-font-size-min: 1;
	--p-font-size-max: 1.25;
	// not sure if I need weight here when it's already defined
	--recursive-weight: 400;
	// Super heading variables
	--hs-line-height-min: 1.1;
	--hs-line-height-max: 1.1;
	--hs-font-size-min: 2.75;
	--hs-font-size-max: 4.5;
	--hs-vf-wght-multiplier-s: 1;
	--hs-vf-wght-multiplier-m: 1;
	--hs-vf-wght-multiplier-l: 1;
	// H1 variables
	--h1-line-height-min: 1.1;
	--h1-line-height-max: 1.1;
	--h1-font-size-min: 2.5;
	--h1-font-size-max: 4;
	--h1-vf-wght-multiplier-s: 0.75;
	--h1-vf-wght-multiplier-m: 0.75;
	--h1-vf-wght-multiplier-l: 0.75;
	// H2 variables
	--h2-line-height-min: 1.15;
	--h2-line-height-max: 1.15;
	--h2-font-size-min: 2;
	--h2-font-size-max: 3;
	--h2-vf-wght-multiplier-s: 0.75;
	--h2-vf-wght-multiplier-m: 0.75;
	--h2-vf-wght-multiplier-l: 0.75;
	// H3 variables
	--h3-line-height-min: 1.15;
	--h3-line-height-max: 1.15;
	--h3-font-size-min: 1.5;
	--h3-font-size-max: 2;
	--h3-vf-wght-multiplier-s: 1.15;
	--h3-vf-wght-multiplier-m: 1.2;
	--h3-vf-wght-multiplier-l: 1.25;
	// H4 variables
	--h4-line-height-min: 1.2;
	--h4-line-height-max: 1.2;
	--h4-font-size-min: 1.3125;
	--h4-font-size-max: 1.5;
	--h4-vf-wght-multiplier-s: 1.3;
	--h4-vf-wght-multiplier-m: 1.4;
	--h4-vf-wght-multiplier-l: 1.5;
  }

  p {
	font-size: calc(var(--p-font-size-min) * 1em);
	font-weight: var(--recursive-weight);
	line-height: var(--p-line-height-min);
  }
  @media screen and (min-width: 24.15em) {
	p {
	  line-height: calc(
		(var(--p-line-height-min) * 1em) +
		  (var(--p-line-height-max) - var(--p-line-height-min)) *
		  (
			(100vw - (var(--bp-small) * 1em)) /
			  (var(--bp-large) - var(--bp-small))
		  )
	  );
	}
  }
  @media (min-width: 60.25em) {
	p {
	  font-size: calc(
		(var(--p-font-size-min) * 1em) +
		  (var(--p-font-size-max) - var(--p-font-size-min)) *
		  (
			(100vw - (var(--bp-large) * 1em)) /
			  (var(--bp-xlarge) - var(--bp-large))
		  )
	  );
	  line-height: var(--p-line-height-max);
	}
  }
  @media (min-width: 75em) {
	p {
	  font-size: calc(var(--p-font-size-max) * 1em);
	}
  }

  .headline-super {
	font-weight: calc(var(--recursive-weight) * var(--hs-vf-wght-multiplier-s));
	font-size: calc(var(--hs-font-size-min) * 1em);
	line-height: var(--hs-line-height-min);
  }

  @media screen and (min-width: 24.15em) {
	.headline-super {
	  line-height: calc(
		(var(--hs-line-height-min) * 1em) +
		  (var(--hs-line-height-max) - var(--hs-line-height-min)) *
		  (
			(100vw - (var(--bp-small) * 1em)) /
			  (var(--bp-xlarge) - var(--bp-small))
		  )
	  );
	  font-size: calc(
		(var(--hs-font-size-min) * 1em) +
		  (var(--hs-font-size-max) - var(--hs-font-size-min)) *
		  (
			(100vw - (var(--bp-small) * 1em)) /
			  (var(--bp-xlarge) - var(--bp-small))
		  )
	  );
	}
  }
  @media screen and (min-width: 43.75em) {
	.headline-super {
	  font-weight: calc(
		var(--recursive-weight) * var(--hs-vf-wght-multiplier-m)
	  );
	}
	.fonts-failed .headline-super {
	  letter-spacing: normal;
	}
  }
  @media (min-width: 75em) {
	.headline-super {
	  font-size: calc(var(--hs-font-size-max) * 1em);
	  font-weight: calc(
		var(--recursive-weight) * var(--hs-vf-wght-multiplier-l)
	  );
	  line-height: var(--hs-line-height-max);
	}
	.fonts-failed .headline-super {
	  letter-spacing: -1px;
	}
  }

  h1 {
	font-weight: calc(var(--recursive-weight) * var(--h1-vf-wght-multiplier-s));
	font-size: calc(var(--h1-font-size-min) * 1em);
	font-style: normal;
	line-height: var(--h1-line-height-min);
  }
  .fonts-failed h1 {
	font-family: Georgia, 'New Times Roman', serif;
	letter-spacing: -0.5px;
  }
  @media screen and (min-width: 24.15em) {
	h1 {
	  line-height: calc(
		(var(--h1-line-height-min) * 1em) +
		  (var(--h1-line-height-max) - var(--h1-line-height-min)) *
		  (
			(100vw - (var(--bp-small) * 1em)) /
			  (var(--bp-xlarge) - var(--bp-small))
		  )
	  );
	  font-size: calc(
		(var(--h1-font-size-min) * 1em) +
		  (var(--h1-font-size-max) - var(--h1-font-size-min)) *
		  (
			(100vw - (var(--bp-small) * 1em)) /
			  (var(--bp-xlarge) - var(--bp-small))
		  )
	  );
	}
  }
  @media screen and (min-width: 43.75em) {
	h1 {
	  font-weight: calc(
		var(--recursive-weight) * var(--h1-vf-wght-multiplier-m)
	  );
	}
	.fonts-failed h1 {
	  letter-spacing: normal;
	}
  }
  @media (min-width: 75em) {
	h1 {
	  font-size: calc(var(--h1-font-size-max) * 1em);
	  font-weight: calc(
		var(--recursive-weight) * var(--h1-vf-wght-multiplier-l)
	  );
	  line-height: var(--h1-line-height-max);
	}
	.fonts-failed h1 {
	  letter-spacing: -1px;
	}
  }

  h2 {
	font-size: calc(var(--h2-font-size-min) * 1em);
	font-weight: calc(var(--recursive-weight) * var(--h2-vf-wght-multiplier-s));
	line-height: var(--h2-line-height-min);
  }

  @media screen and (min-width: 24.15em) {
	h2 {
	  line-height: calc(
		(var(--h2-line-height-min) * 1em) +
		  (var(--h2-line-height-max) - var(--h2-line-height-min)) *
		  (
			(100vw - (var(--bp-small) * 1em)) /
			  (var(--bp-xlarge) - var(--bp-small))
		  )
	  );
	  font-size: calc(
		(var(--h2-font-size-min) * 1em) +
		  (var(--h2-font-size-max) - var(--h2-font-size-min)) *
		  (
			(100vw - (var(--bp-small) * 1em)) /
			  (var(--bp-xlarge) - var(--bp-small))
		  )
	  );
	}
  }
  @media screen and (min-width: 43.75em) {
	h2 {
	  font-weight: calc(
		var(--recursive-weight) * var(--h2-vf-wght-multiplier-m)
	  );
	}
	.fonts-failed h2 {
	  letter-spacing: -1px;
	}
  }
  @media (min-width: 75em) {
	h2 {
	  font-size: calc(var(--h2-font-size-max) * 1em);
	  font-weight: calc(
		var(--recursive-weight) * var(--h2-vf-wght-multiplier-l)
	  );
	  line-height: var(--h2-line-height-max);
	}
  }

  h3 {
	font-size: calc(var(--h3-font-size-min) * 1em);
	font-weight: calc(var(--recursive-weight) * var(--h3-vf-wght-multiplier-s));
	line-height: var(--h3-line-height-min);
  }

  @media screen and (min-width: 24.15em) {
	h3 {
	  line-height: calc(
		(var(--h3-line-height-min) * 1em) +
		  (var(--h3-line-height-max) - var(--h3-line-height-min)) *
		  (
			(100vw - (var(--bp-small) * 1em)) /
			  (var(--bp-xlarge) - var(--bp-small))
		  )
	  );
	  font-size: calc(
		(var(--h3-font-size-min) * 1em) +
		  (var(--h3-font-size-max) - var(--h3-font-size-min)) *
		  (
			(100vw - (var(--bp-small) * 1em)) /
			  (var(--bp-xlarge) - var(--bp-small))
		  )
	  );
	}
  }
  @media screen and (min-width: 43.75em) {
	h3 {
	  font-weight: calc(
		var(--recursive-weight) * var(--h3-vf-wght-multiplier-m)
	  );
	}
  }
  @media (min-width: 75em) {
	h3 {
	  font-size: calc(var(--h3-font-size-max) * 1em);
	  font-weight: calc(
		var(--recursive-weight) * var(--h3-vf-wght-multiplier-l)
	  );
	  line-height: var(--h3-line-height-max);
	}
  }

  h4 {
	font-size: calc(var(--h4-font-size-min) * 1em);
	font-weight: calc(var(--recursive-weight) * var(--h4-vf-wght-multiplier-s));
	line-height: var(--h4-line-height-min);
  }

  @media screen and (min-width: 24.15em) {
	h4 {
	  line-height: calc(
		(var(--h4-line-height-min) * 1em) +
		  (var(--h4-line-height-max) - var(--h4-line-height-min)) *
		  (
			(100vw - (var(--bp-small) * 1em)) /
			  (var(--bp-xlarge) - var(--bp-small))
		  )
	  );
	  font-size: calc(
		(var(--h4-font-size-min) * 1em) +
		  (var(--h4-font-size-max) - var(--h4-font-size-min)) *
		  (
			(100vw - (var(--bp-small) * 1em)) /
			  (var(--bp-xlarge) - var(--bp-small))
		  )
	  );
	}
  }
  @media screen and (min-width: 43.75em) {
	h4 {
	  font-weight: calc(
		var(--recursive-weight) * var(--h4-vf-wght-multiplier-m)
	  );
	}
  }
  @media (min-width: 75em) {
	h4 {
	  font-size: calc(var(--h4-font-size-max) * 1em);
	  font-weight: calc(
		var(--recursive-weight) * var(--h4-vf-wght-multiplier-l)
	  );
	  line-height: var(--h4-line-height-max);
	}
  }
}
